// Initialize on page load
window.onload = function() {
    loadHistory();
    
    // Register service worker with improved error handling
    if ('serviceWorker' in navigator) {
        console.log('Service Worker is supported in this browser');
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('./sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                })
                .catch(function(error) {
                    console.error('ServiceWorker registration failed: ', error);
                });
        });
    } else {
        console.error('Service Workers are not supported in this browser');
    }
};
</body>
</html> 